"Issue Type","Summary","Test Type","Steps","Expected Result","Labels"
"Test","Filter records older than 60 days","Manual","1. Ensure the 'run' table has records with various 'msg_sent_date' values\n2. Run the archival script","Only records with 'msg_sent_date' older than 60 days are selected for export","DEV-1017"
"Test","Export filtered records to CSV with correct naming","Manual","1. Run the archival script with old records present\n2. Check the generated CSV file name and contents","CSV file is named 'run_archive_YYYYMMDD.csv' and contains all filtered records","DEV-1017"
"Test","Upload CSV to correct S3 location","Manual","1. Ensure a CSV file is generated\n2. Run the script to upload\n3. Check S3 bucket and folder for the file","CSV file appears in the correct S3 bucket and folder","DEV-1017"
"Test","Delete records only after successful S3 upload","Manual","1. Run the script with old records present\n2. Simulate successful S3 upload\n3. Check that records are deleted from DB\n4. Simulate failed S3 upload\n5. Check that records are NOT deleted","Records are deleted only if S3 upload is successful; otherwise, no deletion occurs","DEV-1017"
"Test","Verify data integrity between DB and CSV before deletion","Manual","1. Before deletion, compare the CSV file with the DB records\n2. Check all fields and record counts","CSV and DB records match exactly before deletion","DEV-1017"
"Test","Log archival process and automate with cron","Manual","1. Schedule the script with cron\n2. Run the script\n3. Check the log file for process details and errors","A log file is created for each run, capturing all steps and errors","DEV-1017"
"Test","Optionally archive records to run_archive table","Manual","1. Ensure 'run_archive' table exists\n2. Run the script with archiving enabled\n3. Check that filtered records are inserted into 'run_archive' before deletion","Filtered records are present in 'run_archive' table before deletion from 'run' table","DEV-1017" 